<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dhamakedar Wrestling ‚Äì Mobile Touch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background: #111;
      color: #f5f5f5;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px;
      gap: 8px;
    }
    h1 {
      font-size: 18px;
      text-align: center;
    }
    .info {
      font-size: 12px;
      text-align: center;
    }

    .top-bar {
      width: 100%;
      max-width: 900px;
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      gap: 6px;
      flex-wrap: wrap;
    }

    .health-container {
      flex: 1;
      background: #333;
      border-radius: 4px;
      overflow: hidden;
      border: 1px solid #555;
      position: relative;
      height: 24px;
      min-width: 110px;
    }

    .health-fill {
      height: 100%;
      width: 100%;
      transition: width 0.15s linear;
    }

    .player1-health {
      background: linear-gradient(90deg, #ff0044, #ff7700);
    }

    .player2-health {
      background: linear-gradient(90deg, #00c8ff, #0055ff);
    }

    .health-label {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      text-shadow: 0 0 4px #000;
    }

    .round-info {
      min-width: 140px;
      text-align: center;
      font-size: 11px;
      padding: 3px 4px;
      border-radius: 4px;
      background: #222;
      border: 1px solid #555;
    }

    #gameArea {
      width: 100%;
      max-width: 900px;
      aspect-ratio: 16 / 9;
      border: 3px solid #666;
      border-radius: 8px;
      background: radial-gradient(circle at center, #333 0, #111 70%);
      position: relative;
      overflow: hidden;
    }

    .ring-ropes {
      position: absolute;
      inset: 10px;
      border: 2px solid #aaa;
      border-radius: 10px;
      pointer-events: none;
    }

    .fighter {
      position: absolute;
      bottom: 22px;
      width: 55px;
      height: 90px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      text-align: center;
      text-shadow: 0 0 3px #000;
      transition: transform 0.05s linear;
    }

    #p1 {
      background: linear-gradient(#880000, #ff4444);
    }

    #p2 {
      background: linear-gradient(#003388, #00aaff);
    }

    .fighter.attacking {
      box-shadow: 0 0 15px 3px #ffd700;
      transform: translateY(-8px) scale(1.05);
    }

    .referee {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform: translate(-50%, 50%);
      font-size: 13px;
      font-weight: bold;
      text-shadow: 0 0 5px #000;
      text-align: center;
    }

    #message {
      min-height: 18px;
      font-size: 13px;
      text-align: center;
    }

    .touch-controls {
      width: 100%;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: #1b1b1b;
      border-radius: 8px;
      border: 1px solid #444;
      padding: 6px;
    }

    .controls-row {
      display: flex;
      gap: 6px;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .controls-column {
      flex: 1;
      min-width: 150px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .col-title {
      font-size: 11px;
      opacity: 0.9;
    }

    .btn-row {
      display: flex;
      gap: 4px;
    }

    button {
      flex: 1;
      padding: 8px 4px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #333;
      color: #f5f5f5;
      font-size: 11px;
      font-weight: 600;
      text-align: center;
    }

    button:active {
      transform: scale(0.96);
      background: #555;
    }

    .btn-main {
      background: #bb3b00;
    }

    .btn-main:active {
      background: #e45d00;
    }

    .small {
      font-size: 10px;
    }
  </style>
</head>
<body>
  <h1>DHAMAKEDAR WRESTLING ‚Äì MOBILE</h1>
  <div class="info">
    3 Rounds ‚Ä¢ Blood/Health System ‚Ä¢ Jo 2 round jeete woh FINAL WINNER üèÜ<br />
    <span class="small">Pure touch controls ‚Äì keyboard ki jaroorat nahi.</span>
  </div>

  <div class="top-bar">
    <div class="health-container">
      <div id="p1-health-fill" class="health-fill player1-health"></div>
      <div class="health-label" id="p1-health-label">Player 1 Blood: 100</div>
    </div>
    <div class="round-info" id="roundInfo">
      Round: 1 / 3<br />
      P1 Wins: 0 ‚Ä¢ P2 Wins: 0
    </div>
    <div class="health-container">
      <div id="p2-health-fill" class="health-fill player2-health"></div>
      <div class="health-label" id="p2-health-label">Player 2 Blood: 100</div>
    </div>
  </div>

  <div id="message"></div>

  <div id="gameArea">
    <div class="ring-ropes"></div>
    <div id="p1" class="fighter">PLAYER 1</div>
    <div id="p2" class="fighter">PLAYER 2</div>
    <div class="referee" id="refereeText">Ready? Start Round dabao!</div>
  </div>

  <div class="touch-controls">
    <div class="controls-row">
      <div class="controls-column">
        <div class="col-title">Player 1 (Left)</div>
        <div class="btn-row">
          <button data-action="p1-left">‚óÄ Move</button>
          <button data-action="p1-right">Move ‚ñ∂</button>
        </div>
        <div class="btn-row">
          <button data-action="p1-punch">üëä Punch</button>
          <button data-action="p1-kick">ü¶µ Kick</button>
        </div>
      </div>
      <div class="controls-column">
        <div class="col-title">Player 2 (Right)</div>
        <div class="btn-row">
          <button data-action="p2-left">‚óÄ Move</button>
          <button data-action="p2-right">Move ‚ñ∂</button>
        </div>
        <div class="btn-row">
          <button data-action="p2-punch">üëä Punch</button>
          <button data-action="p2-kick">ü¶µ Kick</button>
        </div>
      </div>
    </div>

    <div class="controls-row">
      <div class="controls-column">
        <div class="col-title">Match Controls</div>
        <div class="btn-row">
          <button class="btn-main" data-action="start-round">‚ñ∂ Start / Next Round</button>
          <button data-action="reset-match">üîÑ Reset Match</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Basic config
    const MAX_HEALTH = 100;
    const DAMAGE = {
      punch: 10,
      kick: 15
    };
    const ROUND_LIMIT = 3;
    const WINS_TO_FINISH = 2;

    const gameArea = document.getElementById("gameArea");
    const p1El = document.getElementById("p1");
    const p2El = document.getElementById("p2");
    const refereeText = document.getElementById("refereeText");
    const messageEl = document.getElementById("message");
    const roundInfoEl = document.getElementById("roundInfo");

    const p1HealthFill = document.getElementById("p1-health-fill");
    const p2HealthFill = document.getElementById("p2-health-fill");
    const p1HealthLabel = document.getElementById("p1-health-label");
    const p2HealthLabel = document.getElementById("p2-health-label");

    const fighterWidth = 55;

    let gameState = {
      round: 1,
      p1Wins: 0,
      p2Wins: 0,
      roundActive: false,
      gameOver: false
    };

    let p1 = {
      x: 80,
      health: MAX_HEALTH
    };
    let p2 = {
      x: 260,
      health: MAX_HEALTH
    };

    function clampPosition(x) {
      const padding = 15;
      const areaWidth = gameArea.clientWidth;
      const maxX = areaWidth - fighterWidth - padding;
      return Math.max(padding, Math.min(x, maxX));
    }

    function updatePositions() {
      p1El.style.left = p1.x + "px";
      p2El.style.left = p2.x + "px";
    }

    function updateHealthUI() {
      const p1Percent = Math.max(0, (p1.health / MAX_HEALTH) * 100);
      const p2Percent = Math.max(0, (p2.health / MAX_HEALTH) * 100);
      p1HealthFill.style.width = p1Percent + "%";
      p2HealthFill.style.width = p2Percent + "%";
      p1HealthLabel.textContent = "Player 1 Blood: " + Math.max(0, Math.round(p1.health));
      p2HealthLabel.textContent = "Player 2 Blood: " + Math.max(0, Math.round(p2.health));
    }

    function updateRoundInfo(extraText) {
      let text =
        "Round: " + gameState.round + " / " + ROUND_LIMIT +
        "<br />P1 Wins: " + gameState.p1Wins +
        " ‚Ä¢ P2 Wins: " + gameState.p2Wins;
      if (extraText) text += "<br />" + extraText;
      roundInfoEl.innerHTML = text;
    }

    function resetFightersForRound() {
      p1.health = MAX_HEALTH;
      p2.health = MAX_HEALTH;
      const areaWidth = gameArea.clientWidth;
      p1.x = areaWidth * 0.25 - fighterWidth / 2;
      p2.x = areaWidth * 0.75 - fighterWidth / 2;
      updatePositions();
      updateHealthUI();
    }

    function startRound() {
      if (gameState.gameOver) return;
      resetFightersForRound();
      gameState.roundActive = true;
      messageEl.textContent = "Round " + gameState.round + " ‚Äì FIGHT! üî•";
      refereeText.textContent = "FIGHT!";
      updateRoundInfo();
    }

    function endRound(winner) {
      gameState.roundActive = false;

      if (winner === "p1") {
        gameState.p1Wins += 1;
        messageEl.textContent = "Player 1 ne round jeet liya! üí•";
      } else {
        gameState.p2Wins += 1;
        messageEl.textContent = "Player 2 ne round jeet liya! üí•";
      }

      refereeText.textContent = "K.O!";

      if (
        gameState.p1Wins >= WINS_TO_FINISH ||
        gameState.p2Wins >= WINS_TO_FINISH ||
        gameState.round >= ROUND_LIMIT
      ) {
        gameState.gameOver = true;
        let matchWinner;
        if (gameState.p1Wins === gameState.p2Wins) {
          matchWinner = "Draw (dono barabar) üòÖ";
        } else {
          matchWinner = gameState.p1Wins > gameState.p2Wins ? "Player 1" : "Player 2";
        }
        messageEl.textContent += "  " + matchWinner + " ne poora match jeet liya! üèÜ";
        updateRoundInfo("Match khatam! Reset ke liye button dabao.");
      } else {
        gameState.round += 1;
        updateRoundInfo("Next round ke liye Start / Next Round dabao.");
      }
    }

    function dealDamage(target, amount) {
      if (!gameState.roundActive || gameState.gameOver) return;
      target.health -= amount;
      updateHealthUI();
      if (target.health <= 0) {
        if (target === p1) endRound("p2");
        else endRound("p1");
      }
    }

    function fightersInRange() {
      return Math.abs(p1.x - p2.x) < 70;
    }

    function doAttack(attackerId, type) {
      if (!gameState.roundActive || gameState.gameOver) return;

      const damage = DAMAGE[type] || 0;
      let attackerEl, target;

      if (attackerId === "p1") {
        attackerEl = p1El;
        target = p2;
      } else {
        attackerEl = p2El;
        target = p1;
      }

      attackerEl.classList.add("attacking");

      if (fightersInRange()) {
        dealDamage(target, damage);
      }

      setTimeout(() => {
        attackerEl.classList.remove("attacking");
      }, 120);
    }

    function resetMatch() {
      gameState = {
        round: 1,
        p1Wins: 0,
        p2Wins: 0,
        roundActive: false,
        gameOver: false
      };
      resetFightersForRound();
      updateHealthUI();
      updateRoundInfo();
      messageEl.textContent = "New match! Start / Next Round dabao.";
      refereeText.textContent = "Ready? Start Round dabao!";
    }

    function handleAction(action) {
      const moveStep = 10;

      if (action === "start-round") {
        if (!gameState.roundActive && !gameState.gameOver) {
          startRound();
        }
        return;
      }

      if (action === "reset-match") {
        resetMatch();
        return;
      }

      if (!gameState.roundActive || gameState.gameOver) return;

      switch (action) {
        case "p1-left":
          p1.x = clampPosition(p1.x - moveStep);
          break;
        case "p1-right":
          p1.x = clampPosition(p1.x + moveStep);
          break;
        case "p2-left":
          p2.x = clampPosition(p2.x - moveStep);
          break;
        case "p2-right":
          p2.x = clampPosition(p2.x + moveStep);
          break;
        case "p1-punch":
          doAttack("p1", "punch");
          break;
        case "p1-kick":
          doAttack("p1", "kick");
          break;
        case "p2-punch":
          doAttack("p2", "punch");
          break;
        case "p2-kick":
          doAttack("p2", "kick");
          break;
      }

      updatePositions();
    }

    function setupButtons() {
      const buttons = document.querySelectorAll("[data-action]");
      buttons.forEach((btn) => {
        const action = btn.getAttribute("data-action");

        const handler = (e) => {
          e.preventDefault();
          handleAction(action);
        };

        btn.addEventListener("touchstart", handler, { passive: false });
        btn.addEventListener("click", handler);
      });
    }

    window.addEventListener("load", () => {
      resetFightersForRound();
      updateHealthUI();
      updateRoundInfo();
      setupButtons();
      messageEl.textContent = "Welcome! Start / Next Round dabao Round 1 shuru karne ke liye.";
    });

    window.addEventListener("resize", () => {
      // Resize pe positions thodi adjust ho jaayein
      resetFightersForRound();
    });
  </script>
</body>
</html>
